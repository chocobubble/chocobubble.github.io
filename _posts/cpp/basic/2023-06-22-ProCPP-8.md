---
title:  "[전문가를 위한 C++] 클래스와 객체 이해"
excerpt: "전문가를 위한 C++"
excerpt_separator: "<!--more-->"
categories:
  - CPP
tags:
  - CPP
  - Class
  - Instance

toc: true
toc_sticky: true

use_math: true

date: 2023-06-22
last_modified_at: 2023-06-22
---

> '전문가를 위한 C++ - Marc Gregoire 지음, 남기혁 옮김' 책을 참고하여 작성한 포스트입니다.

---

C++은 객체를 정의하거나 사용할 수 있도록 **클래스(class)**를 제공한다.
{: .notice--info}

# 스프레드시트 예제
- 이 장에서는 간단한 스프레드시트 예제를 이용해 개념들을 이해해 나가 본다.

<br><br>

# 클래스 작성 방법
## 클래스 정의
- 클래스는 객체에 대한 동작(메서드)과 속성(데이터 멤버)으로 이루어져 있다.
- 일반적으로 클래스 정의를 작성한 파일의 이름은 클래스의 이름과 똑같이 짓는다.
### 클래스 멤버(member)
- 멤버에는 메서드, 생성자, 소멸자와 같은 **멤버 함수(member function)**,
- 열거형, 타입 앨리어스, 중첩 클래스 등과 같은 **멤버 변수(member variable, 데이터 멤버)** 가 있다.
- static member(정적 멤버)를 제외하고는 기본적으로 멤버는 클래스의 **인스턴스(Instance)**인 **객체(object)**에만 적용된다.
- <u>클래스는 개념을 정의하고, 객체는 실체를 표현한다!</u>
- 멤버 함수와 데이터 멤버의 개수는 제한이 없으나, 서로의 이름이 같으면 안된다.
### 접근 제어
- 세가지 **접근 제한자(access modifier, access specifier)** 가 있다.
    1. public
    2. private
    3. protected
- 클래스의 기본 접근 제한자는 private 이고, struct 는 기본 접근 제한자가 public 이다.
### 선언 순서
- 멤버와 접근제한자를 선언하는 순서는 따로 없다.
### 클래스 내부의 멤버 초기자
- 데이터 멤버는 클래스 정의와 동시에 초기화가 가능하다. <u>데이터 멤버는 항상 초기화하는 것이 좋다.</u>
```cpp
private:
    int CellValue { 0 };
```

## 메서드 정의 방법
- 클래스 정의는 모듈 인터페이스 파일에 작성한다.
- 메서드 정의는 모듈 인터페이스 파일에 해도 되고, **모듈 구현 파일**(.cpp)에 작성해도 된다.
- 메서드 정의(구현) 할 때는 접근 제한자를 생략해도 된다.

```cpp
void SpreadsheetCell::SetValue(int Value)
{
    CellValue = Value;
}
```
- ::를 **스코프 지정 연산자**라고 부른다.
- 이 표현으로 메서드의 정의가 어느 클래스에 속하는 지 알 수 있다.

### 데이터 멤버 접근 방법
- 메서드 본문 안에서는 자신이 속한 객체 내에 모든 데이터 멤버에 접근 가능하다.
### 다른 메서드 호출하기
- 클래스에 정의된 메서드끼리 서로 호출도 가능하다.
### this 포인터
- 메서드를 호출하면 메서드가 속한 객체의 포인터가 숨겨진 매개변수 형태로 전달되는데, 이 포인터의 이름이 **this**다.

```cpp
void SpreadsheetCell::SetValue(int Value)
{
    this->CellValue = Value;
}
```

## 객체 사용법
- 크게 두 가지이다.
### 스택에 생성한 객체

```cpp
SpreadsheetCell MyCell, AnotherCell;
MyCell.SetValue(6);
AnotherCell.SetString("3");
```

- 단순 변수를 선언하듯이 객체를 생성하면 된다. 타입이 클래스 이름일 뿐이다.
- .을 **도트(dot)**연산자라고 부른다.
- 도트 연산자로 객체의 public 데이터 멤버에 접근 가능하다.

### 프리스토어에 생성한 객체
- new를 사용해 객체를 동적으로 생성할 수도 있다.

```cpp
SpreadsheetCell* MyCellPtr { new SpreadsheetCell {} };
MyCellPtr->SetValue(4);
delete MyCellPtr;
MyCellPtr = nullptr;
```

- 프리스토어에 생성한 객체는 화살표 연산자로 멤버에 접근한다.
- <u>화살표 연산자는 역참조 연산자(*)와 멤버 접근 연산자(.)를 합친 것이다.</u>
- delete 해주어야 하고 싫으면 스마트포인터 쓰기.

```cpp
auto MyCellSmartPtr { make_unique<SpreadsheetCell>() };
MyCellSmartPtr->SetValue(7);
// 직접 해제 안해도 된다.
```

---

<br><br>

# 객체의 라이프 사이클
- 생성(creation), 소멸(destruction), 대입(assignment)의 세 단계로 구성된다.
## 객체 생성
- <u>스택에 생성될 객체는 선언되는 시점에 생성되고,</u>
- <u>동적으로 생성하는 경우에는 직접 공간을 할당해서 생성한다.</u>
- 객체 생성시 객체에 포함된 객체도 함께 생성된다. 소멸될 때도 함께 소멸한다.
- **생성자(constructor, ctor)**를 통해 객체 선언과 동시에 초깃값 설정이 가능하다.